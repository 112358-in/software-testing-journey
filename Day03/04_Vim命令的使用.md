

以下是针对测试工程师场景的 **Vim 使用指南**，涵盖日常工作中最常用的操作，助你快速上手：

---

### **1. Vim 核心模式与切换**
| 模式          | 功能                     | 进入方式               | 退出方式             |
|---------------|--------------------------|------------------------|---------------------|
| **正常模式**  | 移动光标、复制/粘贴/删除 | 启动Vim默认进入        | 按 `i` 进入插入模式 |
| **插入模式**  | 输入文本                 | 按 `i`、`a`、`o` 等键 | 按 `ESC` 返回正常模式 |
| **命令模式**  | 保存/退出/搜索等操作     | 正常模式下按 `:`       | 执行命令后自动退出   |

---

### **2. 测试工程师必会操作**
#### **(1) 文件基础操作**
```bash
# 打开/创建文件（示例：编辑测试配置文件）
vim /home/user/test_config.conf

# 保存文件（命令模式下）
:w

# 保存并退出（命令模式下）
:wq

# 强制退出不保存（命令模式下）
:q!
```

#### **(2) 文本编辑高频命令**
| 操作               | 命令                | 使用场景示例                     |
|--------------------|---------------------|----------------------------------|
| **进入插入模式**   | `i`（光标前插入）   | 修改配置文件参数                 |
|                    | `A`（行尾插入）     | 在日志文件末尾追加内容           |
| **删除字符**       | `x`                 | 删除错误字符（如IP地址输错）     |
| **删除整行**       | `dd`                | 删除无效的测试用例配置行         |
| **复制/粘贴**      | `yy` + `p`          | 复制一行数据库连接配置并重复使用 |
| **撤销操作**       | `u`                 | 恢复误删的日志记录              |

#### **(3) 搜索与替换（定位Bug必备）**
```bash
# 在文件中搜索关键词（如"ERROR"）
/ERROR     # 正常模式下输入，按 n/N 跳转下一个/上一个匹配项

# 替换所有匹配内容（命令模式下）
:%s/old_text/new_text/g   # 示例：将"dev_db"替换为"test_db"
```

#### **(4) 分屏操作（同时查看日志与代码）**
```bash
# 垂直分屏
:vsp new_file.log

# 水平分屏
:sp debug.log

# 切换窗口
Ctrl + w → 方向键
```

---

### **3. 测试场景实战示例**
#### **场景：修改自动化测试脚本**
```bash
# 用Vim打开Python脚本
vim test_login.py

# 操作步骤：
1. 按 `/` 输入 "def test_invalid_password"，按 Enter 定位到函数；
2. 按 `j` 下移光标到需要修改的行；
3. 按 `i` 进入插入模式，修改断言语句；
4. 按 `ESC` 返回正常模式，输入 `:wq` 保存退出。
```

---

### **4. 常见问题急救**
#### **Q：如何退出Vim？**
- 不确定是否修改：按 `ESC` 后输入 `:q!` 强制退出不保存  
- 保存并退出：按 `ESC` 后输入 `:wq`

#### **Q：误删多行内容？**
- 按 `u` 撤销最近操作，重复按可撤销多步

---

### **5. 效率提升技巧**
1. **配置 ~/.vimrc**：添加行号显示（`set number`）、语法高亮（`syntax on`）  
2. **插件推荐**：  
   - [NERDTree](https://github.com/preservim/nerdtree)：文件目录树（快速跳转测试用例文件）  
   - [vim-fugitive](https://github.com/tpope/vim-fugitive)：Git集成（查看代码修改历史）

---

**练习任务**：  
1. 在虚拟机中创建 `test.log` 文件，用 Vim 添加以下内容：  
   ```
   [INFO] Test case "login_success" passed  
   [ERROR] Test case "payment_timeout" failed: Connection reset  
   ```  
2. 使用 Vim 将 `[ERROR]` 替换为 `[WARN]` 并保存。  

掌握 Vim 将大幅提升你在 Linux 环境下的测试效率！ 🚀